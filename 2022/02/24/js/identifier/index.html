<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"marked42.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Javascript vs C下面这段代码在 Javascript 中是合法的变量赋值语句，但是在 C 语言中并不合法。">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript中什么是合法变量名？">
<meta property="og:url" content="http://marked42.github.io/2022/02/24/js/identifier/index.html">
<meta property="og:site_name" content="Epiphany">
<meta property="og:description" content="Javascript vs C下面这段代码在 Javascript 中是合法的变量赋值语句，但是在 C 语言中并不合法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://marked42.github.io/images/reserved-word-keyword.jpeg">
<meta property="article:published_time" content="2022-02-24T21:19:04.000Z">
<meta property="article:modified_time" content="2022-02-28T05:43:58.325Z">
<meta property="article:author" content="penghui">
<meta property="article:tag" content="Identifier">
<meta property="article:tag" content="ECMAScript">
<meta property="article:tag" content="IdentifierName">
<meta property="article:tag" content="标识符名称">
<meta property="article:tag" content="标识符">
<meta property="article:tag" content="ReservedWord">
<meta property="article:tag" content="保留字">
<meta property="article:tag" content="Keyword">
<meta property="article:tag" content="关键字">
<meta property="article:tag" content="Unicode">
<meta property="article:tag" content="Babel">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://marked42.github.io/images/reserved-word-keyword.jpeg">

<link rel="canonical" href="http://marked42.github.io/2022/02/24/js/identifier/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Javascript中什么是合法变量名？ | Epiphany</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Epiphany</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">17</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">3</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">3</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/marked42" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://marked42.github.io/2022/02/24/js/identifier/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="penghui">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Epiphany">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Javascript中什么是合法变量名？
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-24 21:19:04" itemprop="dateCreated datePublished" datetime="2022-02-24T21:19:04+00:00">2022-02-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-28 05:43:58" itemprop="dateModified" datetime="2022-02-28T05:43:58+00:00">2022-02-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Javascript/" itemprop="url" rel="index"><span itemprop="name">深入理解Javascript</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Javascript-vs-C"><a href="#Javascript-vs-C" class="headerlink" title="Javascript vs C"></a>Javascript vs C</h1><p>下面这段代码在 Javascript 中是合法的变量赋值语句，但是在 C 语言中并不合法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>原因在于 Javascript 和 C 语言对于合法的变量名称规定不同。本文以 ECMAScript 规范为依据，对这个问题进行探讨。文中使用了标识符名称（IdentifierName）、标识符（Identifier）、保留字（ReservedWord）、关键字（Keyword）等规范中的概念，提示大家在阅读的过程中注意这些概念之间的联系和区别，否则容易混淆。</p>
<h1 id="名称"><a href="#名称" class="headerlink" title="名称"></a>名称</h1><h2 id="合法形式"><a href="#合法形式" class="headerlink" title="合法形式"></a>合法形式</h2><p>Javascript 引擎对代码进行处理时，首先在编译阶段进行分词操作，将源码划分为不同的种类的单词（Token），然后使用单词流作为后续解析的输入。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码中有几类分词：</p>
<ol>
<li>数字 <code>1</code></li>
<li><strong>标识符（Identifier）</strong> <code>test1</code>/<code>a</code></li>
<li><strong>保留字（ReservedWord）</strong><code>function</code>/<code>let</code></li>
<li>空白与标点符号</li>
</ol>
<p>函数名、变量名等位置使用的是标识符类型的 Token，由数字、字母组成。另外为了不与数字冲突所以规定标识符不能以数字开头。<code>function</code>/<code>let</code>等固定语法位置使用的单词形式上也符合标识符定义，但是因为用作特殊用途，所以这一类单词被划分为保留字类型。</p>
<p>ECMAScript 规范中<a target="_blank" rel="noopener" href="https://262.ecma-international.org/6.0/#sec-names-and-keywords">名称与关键字</a>对名称的合法形式进行规定，主要涉及三个概念标识符名称（IdentifierName）、标识符（Identifier）和保留字（ReservedWord）。</p>
<ol>
<li>标识符是指能够作为合法的变量名、函数名、类名、属性名等名称的形式</li>
<li>保留字</li>
<li>标识符和保留字的合法形式统称为标识符名称</li>
</ol>
<p>标识符名称的合法形式使用 BNF 语法规定如下。</p>
<figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">IdentifierName ::</span><br><span class="line">  IdentifierStart</span><br><span class="line">  IdentifierName IdentifierPart</span><br><span class="line"></span><br><span class="line">IdentifierStart ::</span><br><span class="line">  IdentifierStartChar</span><br><span class="line">  \ UnicodeEscapeSequence</span><br><span class="line"></span><br><span class="line">IdentifierPart ::</span><br><span class="line">  IdentifierPartChar</span><br><span class="line">  \ UnicodeEscapeSequence</span><br><span class="line"></span><br><span class="line">IdentifierStartChar ::</span><br><span class="line">  UnicodeIDStart</span><br><span class="line">  $</span><br><span class="line">  _</span><br><span class="line"></span><br><span class="line">IdentifierPartChar ::</span><br><span class="line">  UnicodeIDContinue</span><br><span class="line">  $</span><br><span class="line">  <span class="attribute">&lt;ZWNJ&gt;</span></span><br><span class="line">  <span class="attribute">&lt;ZWJ&gt;</span></span><br></pre></td></tr></table></figure>

<p>关键的含义有两点。</p>
<ol>
<li>标识符名称的首字母必须满足 IdentifierStartChar 的规定，也就是可以使用<code>$</code>、<code>_</code>和 Unicode 中能作为名称首字母的字符（UnicodeIDStart）。</li>
<li>标识符名称的后续字母必须满足 IdentifierPartChar 的规定，可以是<code>$</code>、<code>&lt;ZWNJ&gt;</code>、<code>&lt;ZWJ&gt;</code>和 Unicode 中能作为名称后续字母的字符（UnicodeIDContinue）。其中<code>UnicodeIDContinue</code>包含了<code>UnicodeIDStart</code>、<code>_</code>、数字和其他一些合法字符。</li>
</ol>
<p>也就是说后续字符包含的范围比首字符要大。Javascript 相比于 C 语言允许更多字符作为标识符</p>
<ol>
<li>开头允许 U+0024 (DOLLAR SIGN) and U+005F (LOW LINE)</li>
<li>后续字符允许 U+200C (ZERO WIDTH NON-JOINER) and U+200D (ZERO WIDTH JOINER)</li>
</ol>
<p>这解释了<code>$a = 1</code>在 Javascript 中合法但是在 C 语言中非法的现象。</p>
<h2 id="中文名称"><a href="#中文名称" class="headerlink" title="中文名称"></a>中文名称</h2><p>标识符合法形式中允许使用 Unicode 码点分类 UnicodeIDStart/UnicodeIDContinue，这意味着我们可以使用中文、日文、韩文等字符作为名称。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> 姓 = <span class="string">&#x27;李&#x27;</span></span><br><span class="line"><span class="keyword">const</span> 名 = <span class="string">&#x27;白&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> 问好(姓, 名) &#123;</span><br><span class="line">  <span class="keyword">const</span> greeting = <span class="string">`你好，<span class="subst">$&#123;姓&#125;</span><span class="subst">$&#123;名&#125;</span> 🤪`</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(greeting)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 你好，李白 🤪</span></span><br><span class="line">问好(姓, 名)</span><br></pre></td></tr></table></figure>

<p>上面代码中函数名、参数名、变量名都使用了中文，是合法的形式。</p>
<h2 id="UnicodeIDStart-和-UnicodeIDContinue"><a href="#UnicodeIDStart-和-UnicodeIDContinue" class="headerlink" title="UnicodeIDStart 和 UnicodeIDContinue"></a>UnicodeIDStart 和 UnicodeIDContinue</h2><p>完整的 UnicodeIDStart 和 UnicodeIDContinue 包含的字符可以参考<a target="_blank" rel="noopener" href="https://www.unicode.org/reports/tr31/">Unicode® Standard Annex #31</a>中 Default Identifier Syntax 的内容。</p>
<p>Babel 对于标识符的相关实现位于<a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-helper-validator-identifier/src/identifier.ts">这里</a>，使用<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@unicode/unicode-14.0.0">Unicode v14.0.0</a>提取合法的码点范围并生成正则表达式来检测合法名称字符。</p>
<p>粗略来说，合法的名称字符包括了几类。</p>
<table>
  <tr>
    <th>码点范围</th>
    <th>分类</th>
    <th>字符</th>
  </tr>
  <tr>
    <td>0x00 - 0xff</td>
    <td>ASCII 字符集</td>
    <td>英文大写字母、小写字母、数字和几个特殊字符$、_</td>
  </tr>
  <tr>
    <td>0x0100 - 0xffff</td>
    <td>Unicode 基础平面 BMP 中的合法字符</td>
    <td>中文、日文、韩文</td>
  </tr>
  <tr>
    <td>0x01000 - 0x10ffff</td>
    <td>Unicode 补充平面（Astral）</td>
    <td>其他字符</td>
  </tr>
</table>

<h2 id="转义序列"><a href="#转义序列" class="headerlink" title="转义序列"></a>转义序列</h2><p>标识符名称支持使用 Unicode 转义序列<a target="_blank" rel="noopener" href="https://262.ecma-international.org/6.0/#sec-literals-string-literals">UnicodeEscapeSequence</a>来表示 Unicode 字符，方便在不能直接使用 Unicode 字符的情况下使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// \u0041 是字符&#x27;A&#x27;的转义序列</span><br><span class="line">let \u0041 = 1;</span><br><span class="line">console.log(&#x27;A: &#x27;, A)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// \u&#123;0042&#125; 是字符&#x27;B&#x27;的转义序列</span><br><span class="line">let \u&#123;0042&#125; = 2;</span><br><span class="line">console.log(&#x27;B: &#x27;, B)</span><br></pre></td></tr></table></figure>

<p>上面使用了 Unicode 转义序列的两种形式分别定义了变量 A 和 B，<code>\u HexDigits</code>的形式只能表示 Unicode 中基本平面的字符，<code>\u&#123;CodePoint&#125;</code>的形式能表示 Unicode 中的所有字符，完整的定义如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">UnicodeEscapeSequence ::</span><br><span class="line">  u Hex4Digits</span><br><span class="line">  u&#123; CodePoint &#125;</span><br><span class="line"></span><br><span class="line">Hex4Digits ::</span><br><span class="line">  HexDigit HexDigit HexDigit HexDigit</span><br><span class="line"></span><br><span class="line">HexDigit :: one of</span><br><span class="line">  0 1 2 3 4 5 6 7 8 9 a b c d e f A B C D E F</span><br><span class="line"></span><br><span class="line">CodePoint ::</span><br><span class="line">  HexDigits[~Sep] but only if MV of HexDigits ≤ 0x10FFFF</span><br></pre></td></tr></table></figure>

<p>对于错误形式的转义序列，执行时在代码解析阶段就直接报错。</p>
<p><code>\u HexDigits</code>形式必须是<code>\u</code>后面跟着<strong>四个</strong>十六进制字符（HexDigit）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SyntaxError: Invalid Unicode escape sequence</span></span><br><span class="line"><span class="keyword">const</span> \uaa = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(\uaa)</span><br></pre></td></tr></table></figure>

<p><code>\u&#123;CodePoint&#125;</code>形式中括号对内也是十六进制字符，但是要求代表的码点值必须小于等于（0x10FFFF），也就是位于 Unicode 字符集规定的码点范围内。</p>
<p>下面是几种非法的转义序列形式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误，包含了不属于十六进制字符的字符g</span></span><br><span class="line">\u&#123;1g&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误，码点范围超出Unicode字符集</span></span><br><span class="line">\u&#123;<span class="number">110000</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确，\u&#123;42&#125;是字符B的转义形式</span></span><br><span class="line"><span class="keyword">const</span> \u&#123;<span class="number">42</span>&#125; = <span class="number">1</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B&#x27;</span>, \u&#123;<span class="number">42</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>转义序列除了必须形式正确外，其代表的对应码点也必须是合法的名称字符。<br>例如反撇号`本身不是合法的名称字符，那么使用转义序列的方式书写也是不正确的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \u&#123;40&#125;是反撇号`的转义序列形式</span></span><br><span class="line"><span class="comment">// SyntaxError: Invalid or unexpected token</span></span><br><span class="line"><span class="keyword">const</span> \u&#123;<span class="number">40</span>&#125; = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h2 id="码点序列语意"><a href="#码点序列语意" class="headerlink" title="码点序列语意"></a>码点序列语意</h2><p>由于允许使用 Unicode 转义序列，所以同一个名称的变量有多种写法。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接书写</span></span><br><span class="line">let A = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 转义序列形式</span></span><br><span class="line"><span class="comment">// \u0041是 &#x27;A&#x27;的转义形式</span></span><br><span class="line">let \u0041 = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>Javascript 中对于标识符名称的处理都是基于码点序列，具有相同码点序列的不同写法被认为是同一个名称。在 ES6 规范中被称为 <a target="_blank" rel="noopener" href="https://262.ecma-international.org/6.0/#sec-identifier-names-static-semantics-stringvalue">StringValue</a> 语意，在 ES 2022 中被称为 <a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-identifiercodepoints">IdentifierCodePoints</a> 语意，使用的术语不相同，但表达式是同一个意思。因此上面这段代码执行的话会报错，因为同一个名称’A’的变量不允许<strong>重复定义</strong>。</p>
<p>Unicode 中代表相同字符（canonically equivalent）的标识符名称并不一定等价，除非其使用的码点序列相同，参考 <a target="_blank" rel="noopener" href="https://262.ecma-international.org/6.0/#sec-names-and-keywords">ES 6 规范</a>。</p>
<blockquote>
<p>Two IdentifierName that are canonically equivalent according to the Unicode standard are not equal unless, after replacement of each UnicodeEscapeSequence, they are represented by the exact same sequence of code points.</p>
</blockquote>
<h2 id="合法标识符名称判断"><a href="#合法标识符名称判断" class="headerlink" title="合法标识符名称判断"></a>合法标识符名称判断</h2><p>通过上面的介绍我们了解了标识符名称的合法形式的定义，主要是两点。</p>
<ol>
<li>首字母必须合法</li>
<li>后续字母必须合法</li>
</ol>
<p>看起来像是废话，但是具体实现逻辑还是有些细节的，这里我们参考<a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-helper-validator-identifier/src/identifier.ts#L85">Babel</a>的实现。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isIdentifierName</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> isFirst = <span class="literal">true</span></span><br><span class="line">  <span class="comment">// iterable protocol返回的是code point序列</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> char <span class="keyword">of</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(name)) &#123;</span><br><span class="line">    <span class="keyword">const</span> cp = char.<span class="title function_">codePointAt</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> (isFirst) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="title function_">isIdentifierStart</span>(cp)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">      isFirst = <span class="literal">false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="title function_">isIdentifierChar</span>(cp)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// isFirst理解为状态机，包含了空串、单个字符、多个字符情况</span></span><br><span class="line">  <span class="keyword">return</span> !isFirst</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个实现中有几个关键点。</p>
<p>第一点，接受的参数是一个字符串，需要从字符串获取其对应的 Unicode 码点序列。由于 Javascript 的字符串使用的是 UTF16 的变长编码，所以字符串获得指定下标位置字符对应码点的方法<code>codePointAt(index)</code>不能直接使用，需要增加对于代理对（Surrogate Pair）的检查。Babel 的实现没有包含这个逻辑，而是直接使用了<code>Array.from(name)</code>的形式。</p>
<p>原因在于字符串实现了<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/@@iterator">迭代器协议</a>，顺序返回字符串每个字符对应的码点，返回形式也是字符串，所以使用 for 循环遍历时每个字符代表一个码点，再使用<code>codePointAt(0)</code>获得正确码点。</p>
<p>第二点，关于首字母<code>isIdentifierStart</code>和后续字母<code>isIdentifierChar</code>的检测逻辑是前文中讲述的内容。</p>
<p>第三点，整个检测逻辑是一个状态机的实现，<code>isFirst</code>变量可以理解为记录了状态机的匹配状态。状态机的合法结束情况是接受了至少一个字符，而且每个字符都满足对应的要求。状态机结束时函数返回<code>true</code>表示输入是合法的标识符名称。</p>
<p>循环中单个字符非法时直接返回<code>false</code>；如果循环能正确结束表示所有字符合法，这时候还要满足至少一个字符，也就是<code>!isFirst</code>。</p>
<h1 id="名称分类"><a href="#名称分类" class="headerlink" title="名称分类"></a>名称分类</h1><p>下图中对标识符名称、标识符、关键字、保留字等概念的关系进行总结。标识符名称是最大的圈，包含了其他三个概念。保留字和标识符是两个互斥的概念，合起来等于标识符名称。关键字和保留字、标识符各有重合。</p>
<p><img data-src="/images/reserved-word-keyword.jpeg" alt="名称分类"></p>
<p>名称的分类可以参考<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/#sec-keywords-and-reserved-words">规范</a>中的表述，其中总是<strong>可以</strong>作为标识符的名称（Math,window,toString 等）和总是<strong>不能</strong>作为标识符的名称（if/else 等）两种情况比较清楚，可以重点关注另外的三种情况<span id="conditional-reserved-word"></span>。</p>
<table>
  <tr>
    <th>分类</th>
    <th>列表</th>
  </tr>
  <tr>
    <td>某些条件下可以作为标识符的保留字</td>
    <td>await, yield</td>
  </tr>
  <tr>
    <td>严格模式下激活的保留字 </td>
    <td>let, static, implements, interface, package, private, protected, public</td>
  </tr>
  <tr>
    <td>可以作为标识符的关键字</td>
    <td>as, async, from, get, meta, of, set, target</td>
  </tr>
</table>

<h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><p>关键字（keyword）是指符合标识符名称（IdentifierName）形式，且出现在<strong>语法结构</strong>中的若干个单词，例如下面代码中的<code>function/if/return</code>等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">a</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>大多数关键字不是合法的标识符，也就是不能出现在需要标识符的语法结构位置中，不能用作变量名、函数名、类名等。但是也有个别关键词<a href="#async-await">例外</a>。</p>
<p>ES 6 中的关键字列表如下，Babel 实现的辅助函数<a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-helper-validator-identifier/src/keyword.ts#L94">isKeyword</a>与其一致。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">break case catch continue debugger default do else finally for function if return switch throw try var const while with new this super class extends export import null true false in instanceof typeof void delete</span><br></pre></td></tr></table></figure>

<h2 id="保留字"><a href="#保留字" class="headerlink" title="保留字"></a>保留字</h2><p><a target="_blank" rel="noopener" href="https://262.ecma-international.org/6.0/#sec-reserved-words">保留字</a>（ReservedWord）是指<strong>标识符名称</strong>中不是<strong>标识符</strong>的其余名称。也就是说一个名称如果属于保留字，就不能用到变量名、函数名、类名等需要标识符的语法位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> enum = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>上面代码中<code>enum</code>是保留字，所以不能作为变量名称使用。但是有些名称作为保留字是<a href="#conditional-reserved-word">有条件的</a>，条件不满足时不是保留字，从而可以作为变量名存在。设计这种机制主要是出于兼容旧代码的考虑，规范新增保留字时，旧代码中可能存在使用新保留字作为变量的情况，为了保证旧代码在新规范下还能正常运行，保留字的触发就需要设置一定条件。</p>
<p>ES2022 中的保留字列表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield</span><br></pre></td></tr></table></figure>

<h2 id="标识符分类"><a href="#标识符分类" class="headerlink" title="标识符分类"></a>标识符分类</h2><p>标识符根据所处的语法位置表示不同的语义，划分为绑定标识符（BindingIdentifier）、标识符引用（IdentifierReference）、标签标识符（LabelIdentifier）和普通标识符（Identifier）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定标识符，定义一个绑定</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用标识符，引用一个绑定</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">// a 标签标识符，标签语句中使用的形式</span></span><br><span class="line"><span class="attr">a</span>: <span class="variable language_">console</span>.<span class="property">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// obj 是绑定标识符</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="comment">// id是普通标识符</span></span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// id是普通标识符</span></span><br><span class="line">obj.<span class="property">id</span></span><br></pre></td></tr></table></figure>

<p>标识符的类型是根据 ECMAScript 规范定义的语法形式确定的，针对具体代码可以查询规范确定。</p>
<p>不同的标识符类型对于合法的标识符名称的要求不同，通过 Javascript 语法规则和静态语意进行约束。</p>
<p>下文中的“能/不能作为标识符”、“合法标识符”等表述，如无特殊说明其中“标识符”均指<strong>绑定标识符、引用标识符和标签标识符</strong>，普通标识符的名称没有特殊要求，可以使用符合标识符名称的任意内容。</p>
<h1 id="合法标识符"><a href="#合法标识符" class="headerlink" title="合法标识符"></a>合法标识符</h1><h2 id="是关键字但不是保留字"><a href="#是关键字但不是保留字" class="headerlink" title="是关键字但不是保留字"></a>是关键字但不是保留字</h2><p>一部分关键字不是保留字，可以作为合法标识符使用，下面对属于这个分类的情况分别给出代码示例。</p>
<p>模块导入导出语法中的关键字<code>from</code>/<code>as</code>可以作为标识符使用，因此下面的代码是合法的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将模块导出到标识符from上，第一个from是标识符，第二个from是关键字</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">from</span> <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;from: &#x27;</span>, <span class="keyword">from</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将readFile导入为as变量，第一个as是关键字，第二个as是标识符</span></span><br><span class="line"><span class="keyword">import</span> &#123; readFile <span class="keyword">as</span> <span class="keyword">as</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;as: &#x27;</span>, <span class="keyword">as</span>)</span><br></pre></td></tr></table></figure>

<p>异步函数语法中<code>async</code>关键字。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个名称为 async的异步函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><code>for-of</code>循环中的<code>of</code>关键字。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将循环变量命名为of</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">of</span> <span class="keyword">of</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">of</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象语法中 get/set 属性或者类定义中 get/set 方法使用到的关键字<code>get</code>/<code>set</code>。</p>
<p>对象属性中用到名称为<code>get</code>/<code>set</code>的变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> get = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="number">2</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> get</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params"></span>) &#123;</span><br><span class="line">      set = value</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类中定义名称为 get 的<code>get</code>属性和名称为 set 的<code>set</code>属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">get</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;get&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;set: &#x27;</span>, value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">get</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">set</span> = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Test</span>().<span class="title function_">print</span>()</span><br></pre></td></tr></table></figure>

<p><code>new.target</code>语法中的<code>target</code>关键字可以作为标识符，<code>new</code>是保留字不能作为标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> target = <span class="keyword">new</span>.<span class="property">target</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;target: &#x27;</span>, target)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Test</span>()</span><br></pre></td></tr></table></figure>

<p><code>import.meta</code>中的<code>meta</code>关键字作为合法的标识符，<code>import</code>是保留字不能作为标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> meta = <span class="keyword">import</span>.<span class="property">meta</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;meta: &#x27;</span>, meta)</span><br></pre></td></tr></table></figure>

<p>上述这些代码示例虽然合法，但是这种写法容易造成误解，实际编码过程中最好<strong>禁用</strong>这种写法。</p>
<h2 id="严格模式保留字"><a href="#严格模式保留字" class="headerlink" title="严格模式保留字"></a>严格模式保留字</h2><p>严格模式下以下列表中的标识符名称也是保留字，不能作为合法标识符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public</span><br><span class="line">private</span><br><span class="line">protected</span><br><span class="line">interface</span><br><span class="line">package</span><br><span class="line">implements</span><br><span class="line">let</span><br><span class="line">static</span><br><span class="line">yield // 下文有单独讨论</span><br></pre></td></tr></table></figure>

<h2 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h2><p>yield 关键字在非严格模式下可以作为合法标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确，非严格模式</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">yield</span> = &#123; <span class="attr">yield</span>: <span class="number">1</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">yield</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">yield</span>.<span class="property">yield</span>)</span><br></pre></td></tr></table></figure>

<p>但是<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-expressions.html#sec-identifiers-static-semantics-early-errors">静态语意</a>规定<strong>严格模式</strong>下 yield 是保留字，不能作为标识符。</p>
<p>使用’use strict’开启严格模式，下面代码中所有 yield 标识符都是非法的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 严格模式</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">yield</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">yield</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">yield</span>)</span><br></pre></td></tr></table></figure>

<p>但是对象属性的标识符是普通标识符，所以名称为 yield 是合法的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">yield</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">yield</span>)</span><br></pre></td></tr></table></figure>

<p>模块代码（Module）中自动开启严格模式，下面的代码是模块代码，<code>yield</code>是保留字，所以定义名称为<code>yield</code>的变量报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SyntaxError: Unexpected strict mode reserved word</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">yield</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>Generator 函数</strong>中不允许使用名称为 yield 关键字的<strong>绑定标识符</strong>，非 Generator 函数中无此限制。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">yieldIsValidIdentifier</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 普通函数中合法</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">yield</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> *<span class="title function_">yieldIsUnexpectedIdentifier</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// SyntaxError: Unexpected identifier</span></span><br><span class="line">  <span class="comment">// 迭代器函数中非法</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">yield</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外 Generator 函数中不允许以<strong>转义序列</strong>形式出现名称为 yield 的绑定标识符、引用标识符和标签标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> *<span class="title function_">gen</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// yield 转义形式</span></span><br><span class="line">  yiel\u&#123;<span class="number">64</span>&#125;: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="await"><a href="#await" class="headerlink" title="await "></a>await <span id="async-await"></span></h2><p>await 关键字在脚本（Script）环境中可以作为合法的标识符，严格模式对 await 是否是保留字<strong>无影响</strong>。下面脚本代码中的 await 都是合法标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">await</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">await</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="keyword">await</span> = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">await</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span></span><br><span class="line">  <span class="keyword">var</span> <span class="keyword">await</span> = <span class="number">3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<strong>模块代码</strong>中 await 是保留字，不能用做标识符，下面的代码是<strong>模块代码</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sync</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 非法</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">await</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非法</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">await</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 非法</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">await</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<strong>异步函数</strong>中 await 是保留字，不能用做标识符，下面的代码是<strong>脚本代码</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sync</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 合法</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">await</span> = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 合法，异步函数的函数名不属于函数内部</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">await</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步函数</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// SyntaxError: Unexpected reserved word</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">await</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在异步函数中同样也不允许以<strong>转义序列</strong>形式出现名称为 await 的绑定标识符、引用标识符和标签标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// SyntaxError: Keyword must not contain escaped characters</span></span><br><span class="line">  \u&#123;<span class="number">61</span>&#125;<span class="attr">wait</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="yield-await-存疑问题"><a href="#yield-await-存疑问题" class="headerlink" title="yield/await 存疑问题"></a>yield/await 存疑问题</h2><p>规范中关于 yield/await<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-expressions.html#sec-identifiers-static-semantics-early-errors">部分</a>有个问题暂时没搞明白。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 规则1</span><br><span class="line">BindingIdentifier[Yield, Await] : yield</span><br><span class="line">  It is a Syntax Error if this production has a [Yield] parameter.</span><br><span class="line"></span><br><span class="line">// 规则2</span><br><span class="line">BindingIdentifier[Yield, Await] : await</span><br><span class="line">  It is a Syntax Error if this production has an [Await] parameter.</span><br><span class="line"></span><br><span class="line">// 规则3</span><br><span class="line">IdentifierReference[Yield, Await] : Identifier</span><br><span class="line">BindingIdentifier[Yield, Await] : Identifier</span><br><span class="line">LabelIdentifier[Yield, Await] : Identifier</span><br><span class="line">  It is a Syntax Error if this production has a [Yield] parameter and StringValue of Identifier is &quot;yield&quot;.</span><br><span class="line">  It is a Syntax Error if this production has an [Await] parameter and StringValue of Identifier is &quot;await&quot;.</span><br></pre></td></tr></table></figure>

<p>规则 3 的情况似乎覆盖了规则 1 和规则 2，为什么规则 1 和规则 2 需要单独表述？ （TODO:）</p>
<p>如果有人知道这个问题或者有兴趣交流，可以联系<a href="/about">我</a>。</p>
<h2 id="eval-arguments"><a href="#eval-arguments" class="headerlink" title="eval/arguments"></a>eval/arguments</h2><p>非严格模式下关键字 eval/arguments 可以作为合法标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">eval</span>)</span><br></pre></td></tr></table></figure>

<p>严格模式下不 eval/arguments 虽然不是保留字，但是也不允许作为<strong>绑定标识符</strong>，也就是不能作为变量名、函数名、类型名。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 非法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">eval</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>但是作为其他类型标识符是合法的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 标签标识符 引用标识符</span></span><br><span class="line"><span class="attr">eval</span>: <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="built_in">eval</span>)</span><br></pre></td></tr></table></figure>

<p>arguments 关键字的情况类似。</p>
<h2 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h2><p><code>true</code>、<code>false</code>、<code>null</code>是保留字，不能作为标识符。<code>undefined</code>的情况比较特殊，它是一个合法标识符，不是<strong>关键字</strong>。Javascript 引擎初始化时在全局对象上初始化了名称为<code>undefined</code>的属性，值也是<code>undefined</code>，所以可以直接使用<code>undefined</code>变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>

<p>全局环境的<code>undefined</code>属性是不能重新<strong>赋值</strong>的，属性配置<code>configurable: false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> originalValue = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局undefined赋值不生效</span></span><br><span class="line"><span class="literal">undefined</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(originalValue)</span><br><span class="line"><span class="comment">// undefined 值没有变化</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>

<p>但是可以重新定义的方式来覆盖全局<code>undefined</code>属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> originalValue = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新定义</span></span><br><span class="line"><span class="keyword">var</span> <span class="literal">undefined</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(originalValue)</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br></pre></td></tr></table></figure>

<p>函数内部的局部变量<code>undefined</code>就可以正常修改。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalUndefined = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">localUndefinedIsMutable</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="literal">undefined</span> = globalUndefined</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> originalValue = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// undefined</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 局部变量undefined赋值生效</span></span><br><span class="line">  <span class="literal">undefined</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// undefined</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(originalValue)</span><br><span class="line">  <span class="comment">// 1 值发生变化</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">undefined</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">localUndefinedIsMutable</span>()</span><br></pre></td></tr></table></figure>

<p>由于存在上述的情况，所以代码中直接使用<code>undefined</code>变量时得到的值不一定是<code>undefined</code>。为了保证拿到<code>undefined</code>值，常见用方式是使用 <a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-expressions.html#sec-void-operator">void 表达式</a>。<code>void expr</code>对表达式 expr 进行求值，然后返回<code>undefined</code>值，expr 可能包含副作用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="let"><a href="#let" class="headerlink" title="let"></a>let</h2><p>let 在<strong>非严格模式</strong>下不是保留字，因此下面的形式是正确的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">let</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="keyword">let</span> &#125; = &#123;&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">let</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;let: &#x27;</span>, <span class="keyword">let</span>)</span><br></pre></td></tr></table></figure>

<p>但是<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-let-and-const-declarations-static-semantics-early-errors">LexicalDeclaration</a>语句和<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-for-in-and-for-of-statements-static-semantics-early-errors">ForInOfStatement</a>中不允许<code>let</code>作为绑定名称（<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/syntax-directed-operations.html#sec-static-semantics-boundnames">BoundNames</a>）。</p>
<p>下面代码中名为<code>let</code>变量的声明都是非法的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SyntaxError: let is disallowed as a lexically bound name</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="keyword">let</span> <span class="keyword">in</span> &#123;&#125;) &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">let</span> <span class="keyword">in</span> &#123;&#125;) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="keyword">let</span> <span class="keyword">of</span> []) &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> <span class="keyword">let</span> <span class="keyword">of</span> []) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">let</span> <span class="keyword">let</span> <span class="keyword">of</span> []) &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> <span class="keyword">let</span> <span class="keyword">of</span> []) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>严格模式下声明名称为<code>let</code>的变量同样报错，但是注意报错原因和非严格模式不相同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// SyntaxError: Unexpected strict mode reserved word</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="keyword">let</span> <span class="keyword">in</span> &#123;&#125;) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>既然<code>let</code>有这些额外的规定，那么<code>const</code>是不是也应该同样规定不能作为绑定名称呢？</p>
<p>查看规范原文，可以看到只对 let 做了表述。</p>
<blockquote>
<p>It is a Syntax Error if the BoundNames of ForDeclaration contains “let”.</p>
</blockquote>
<p>原因在于 const 永远是保留字，不像 let 一样只在严格模式下才是保留字，所以使用 const 作为标识符属于语法错误，在语法解析时就会报错，不需要额外规定。</p>
<h2 id="PrivateIdentifier"><a href="#PrivateIdentifier" class="headerlink" title="PrivateIdentifier"></a>PrivateIdentifier</h2><p>参考<a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-language-functions-and-classes.html#sec-class-definitions-static-semantics-early-errors">规范</a></p>
<h2 id="转义序列-1"><a href="#转义序列-1" class="headerlink" title="转义序列"></a>转义序列</h2><p>关键字和标识符对于转义序列的使用有差别。<strong>关键字</strong>中不允许使用转义序列。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let &#123;&#125; = &#123;&#125;;</span></span><br><span class="line"><span class="comment">// \u&#123;6C&#125; 是 &#x27;l&#x27; 的转义序列</span></span><br><span class="line">\u&#123;6C&#125;et &#123;&#125;  = &#123;&#125;;</span><br></pre></td></tr></table></figure>

<p>上面将 let 使用了转义序列表示，所以代码解析的时候\u{6C}et 被当成标识符而不是关键字，后续语法解析会报错。</p>
<p>Node 环境运行会给出如下报错信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\u&#123;6C&#125;et &#123;&#125;  = &#123;&#125;;</span><br><span class="line">         ^</span><br><span class="line">SyntaxError: Unexpected token &#x27;&#123;&#x27;</span><br></pre></td></tr></table></figure>

<p>Typescript 的解析和提示更智能，会提示关键字中不能使用转义序列。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Keywords cannot contain escape characters.ts(1260)</span><br></pre></td></tr></table></figure>

<p><strong>标识符</strong>中可以使用转义序列，下面两种形式都声明了名称为 let 的变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var let = 1;</span><br><span class="line">var \u&#123;6C&#125;et = 1;</span><br></pre></td></tr></table></figure>

<p>标识符中不允许以转义序列的形式出现保留字。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非法，语法解析阶段报错</span></span><br><span class="line"><span class="comment">// SyntaxError: Unexpected token &#x27;const&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="keyword">const</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 转义形式出现也非法，静态语意报错</span></span><br><span class="line"><span class="comment">// SyntaxError: Keyword must not contain escaped characters</span></span><br><span class="line"><span class="keyword">var</span> \u&#123;<span class="number">63</span>&#125;onst = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h1 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h1><h2 id="保留字判断"><a href="#保留字判断" class="headerlink" title="保留字判断"></a>保留字判断</h2><p>判断一个名称是否为合法的保留字受到严格模式和是否作为绑定标识符两个条件影响，<a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-helper-validator-identifier/src/keyword.ts">Babel</a>提供了四个相关的工具函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 非严格模式下word是不是保留字</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isReservedWord</span>(<span class="params">word: string, inModule: boolean</span>): boolean &#123;</span><br><span class="line">  <span class="keyword">return</span> (inModule &amp;&amp; word === <span class="string">&#x27;await&#x27;</span>) || word === <span class="string">&#x27;enum&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 严格模式下word是不是保留字，相比于非严格模式多了几个保留字</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isStrictReservedWord</span>(<span class="params">word: string, inModule: boolean</span>): boolean &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">isReservedWord</span>(word, inModule) || reservedWordsStrictSet.<span class="title function_">has</span>(word)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 严格模式下只针对绑定标识符形式来word说是保留字</span></span><br><span class="line"><span class="comment"> * 也就是word可以作为标识符引用、标签标识符等形式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isStrictBindOnlyReservedWord</span>(<span class="params">word: string</span>): boolean &#123;</span><br><span class="line">  <span class="keyword">return</span> reservedWordsStrictBindSet.<span class="title function_">has</span>(word)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 严格模式下word是不是保留字，包括所有可能的保留字情况</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isStrictBindReservedWord</span>(<span class="params"></span></span><br><span class="line"><span class="params">  word: string,</span></span><br><span class="line"><span class="params">  inModule: boolean</span></span><br><span class="line"><span class="params"></span>): boolean &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="title function_">isStrictReservedWord</span>(word, inModule) || <span class="title function_">isStrictBindOnlyReservedWord</span>(word)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="合法标识符判断"><a href="#合法标识符判断" class="headerlink" title="合法标识符判断"></a>合法标识符判断</h2><p><a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/validators/isValidIdentifier.ts">isValidIdentifier</a>判断名称 name 是否是合法标识符，reserved 为 true 表示排除保留字。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">isValidIdentifier</span>(<span class="params"></span></span><br><span class="line"><span class="params">  name: string,</span></span><br><span class="line"><span class="params">  reserved: boolean = <span class="literal">true</span></span></span><br><span class="line"><span class="params"></span>): boolean &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> name !== <span class="string">&#x27;string&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (reserved) &#123;</span><br><span class="line">    <span class="comment">// &quot;await&quot; is invalid in module, valid in script; better be safe (see #4952)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isKeyword</span>(name) || <span class="title function_">isStrictReservedWord</span>(name, <span class="literal">true</span>)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">isIdentifierName</span>(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/validators/isValidES3Identifier.ts">isValidES3Identifier</a>判断 name 是否是合法的 ES3 标识符，相比于<code>isValidIdentifier</code>排除了 ES3 中规定的标识符。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">isValidES3Identifier</span>(<span class="params">name: string</span>): boolean &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">isValidIdentifier</span>(name) &amp;&amp; !<span class="variable constant_">RESERVED_WORDS_ES3_ONLY</span>.<span class="title function_">has</span>(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="转换合法标识符"><a href="#转换合法标识符" class="headerlink" title="转换合法标识符"></a>转换合法标识符</h2><p><a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/converters/toIdentifier.ts">toIdentifier</a>将字符串转换为驼峰形式的合法标识符名称，排除可能的保留字形式，可能需要以<code>_</code>开头。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">toIdentifier</span>(<span class="params">input: string</span>): string &#123;</span><br><span class="line">  input = input + <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// replace all non-valid identifiers with dashes</span></span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> c <span class="keyword">of</span> input) &#123;</span><br><span class="line">    name += <span class="title function_">isIdentifierChar</span>(c.<span class="title function_">codePointAt</span>(<span class="number">0</span>)) ? c : <span class="string">&#x27;-&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// remove all dashes and numbers from start of name</span></span><br><span class="line">  name = name.<span class="title function_">replace</span>(<span class="regexp">/^[-0-9]+/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// camel case</span></span><br><span class="line">  name = name.<span class="title function_">replace</span>(<span class="regexp">/[-\s]+(.)?/g</span>, <span class="keyword">function</span> (<span class="params">match, c</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> c ? c.<span class="title function_">toUpperCase</span>() : <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isValidIdentifier</span>(name)) &#123;</span><br><span class="line">    name = <span class="string">`_<span class="subst">$&#123;name&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> name || <span class="string">&#x27;_&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/main/packages/babel-types/src/converters/toBindingIdentifierName.ts">toBindingIdentifierName</a>将字符串转换为合法的绑定标识符名称，在<code>toIdentifier</code>的基础上再排除<code>eval</code>和<code>arguments</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">toBindingIdentifierName</span>(<span class="params">name: string</span>): string &#123;</span><br><span class="line">  name = <span class="title function_">toIdentifier</span>(name)</span><br><span class="line">  <span class="keyword">if</span> (name === <span class="string">&#x27;eval&#x27;</span> || name === <span class="string">&#x27;arguments&#x27;</span>) name = <span class="string">&#x27;_&#x27;</span> + name</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> name</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><ol>
<li><p>Javascript 和 C 语言在合法标识符名称形式上有什么区别？</p>
</li>
<li><p>解释标识符名称、标识符、关键字、保留字这些概念，它们之间有什么联系和区别？</p>
</li>
<li><p>这段代码的含义是什么，为什么可以这样写？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function 求和(...数列) &#123;</span><br><span class="line">  return 数列.reduce((和, 数) =&gt; 数 + 和, 0)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(求和(1, 2, 3))</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码正确么，运行结果是什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var \u&#123;12&#125; = 1</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码会能正确运行么，为什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a = 1</span><br><span class="line">var \u&#123;61&#125; = 2</span><br><span class="line">console.log(a)</span><br></pre></td></tr></table></figure></li>
<li><p>给一个字符串<code>input</code>如何获得对应的码点序列数组？</p>
</li>
<li><p>这段代码会能正确运行么，为什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let a = 1</span><br><span class="line">let \u&#123;61&#125; = 2</span><br><span class="line">console.log(a)</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码正确么，为什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var private = 2</span><br><span class="line">console.log(private)</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码正确么，为什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;use strict&#x27;;</span><br><span class="line">var private = 2</span><br><span class="line">console.log(private)</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码运行结果如何，为什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">from</span> <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;from: &#x27;</span>, <span class="keyword">from</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>这段代码能按预期打印 1 么？不能的话如何修改？两个’eval’有什么区别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eval(&#x27;use strict; var eval = 1; console.log(eval)&#x27;)</span><br></pre></td></tr></table></figure></li>
<li><p>yield 和 await 什么时候可以作为标识符，什么情况下作为关键字？</p>
</li>
<li><p>这段代码正确么，为什么？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> \u&#123;<span class="number">63</span>&#125;onst = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>undefined 相关</p>
<ol>
<li><code>undefined</code>是关键字还是标识符？</li>
<li><code>&lt;a href=&quot;javascript:void(0)&quot;&gt;&lt;/a&gt;</code>为什么可以这样写？</li>
<li><code>undefined === void 0</code>的值总是<code>true</code>么？</li>
<li><code>null</code>和<code>undefined</code>有什么区别？</li>
</ol>
</li>
<li><p>如何判断名称 name 是否是保留字？</p>
</li>
<li><p>如何判断名称 name 是合法标识符？</p>
</li>
<li><p>给一个字符串 name，如何将其转换成合法的标识符。</p>
</li>
</ol>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>penghui
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://marked42.github.io/2022/02/24/js/identifier/" title="Javascript中什么是合法变量名？">http://marked42.github.io/2022/02/24/js/identifier/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Identifier/" rel="tag"># Identifier</a>
              <a href="/tags/ECMAScript/" rel="tag"># ECMAScript</a>
              <a href="/tags/IdentifierName/" rel="tag"># IdentifierName</a>
              <a href="/tags/%E6%A0%87%E8%AF%86%E7%AC%A6%E5%90%8D%E7%A7%B0/" rel="tag"># 标识符名称</a>
              <a href="/tags/%E6%A0%87%E8%AF%86%E7%AC%A6/" rel="tag"># 标识符</a>
              <a href="/tags/ReservedWord/" rel="tag"># ReservedWord</a>
              <a href="/tags/%E4%BF%9D%E7%95%99%E5%AD%97/" rel="tag"># 保留字</a>
              <a href="/tags/Keyword/" rel="tag"># Keyword</a>
              <a href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" rel="tag"># 关键字</a>
              <a href="/tags/Unicode/" rel="tag"># Unicode</a>
              <a href="/tags/Babel/" rel="tag"># Babel</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2022/02/28/babel/advanced/ast/" rel="next" title="抽象语法树">
      抽象语法树 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Javascript-vs-C"><span class="nav-number">1.</span> <span class="nav-text">Javascript vs C</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8D%E7%A7%B0"><span class="nav-number">2.</span> <span class="nav-text">名称</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E6%B3%95%E5%BD%A2%E5%BC%8F"><span class="nav-number">2.1.</span> <span class="nav-text">合法形式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%AD%E6%96%87%E5%90%8D%E7%A7%B0"><span class="nav-number">2.2.</span> <span class="nav-text">中文名称</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UnicodeIDStart-%E5%92%8C-UnicodeIDContinue"><span class="nav-number">2.3.</span> <span class="nav-text">UnicodeIDStart 和 UnicodeIDContinue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97"><span class="nav-number">2.4.</span> <span class="nav-text">转义序列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A0%81%E7%82%B9%E5%BA%8F%E5%88%97%E8%AF%AD%E6%84%8F"><span class="nav-number">2.5.</span> <span class="nav-text">码点序列语意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6%E5%90%8D%E7%A7%B0%E5%88%A4%E6%96%AD"><span class="nav-number">2.6.</span> <span class="nav-text">合法标识符名称判断</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8D%E7%A7%B0%E5%88%86%E7%B1%BB"><span class="nav-number">3.</span> <span class="nav-text">名称分类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">3.1.</span> <span class="nav-text">关键字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%9D%E7%95%99%E5%AD%97"><span class="nav-number">3.2.</span> <span class="nav-text">保留字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E8%AF%86%E7%AC%A6%E5%88%86%E7%B1%BB"><span class="nav-number">3.3.</span> <span class="nav-text">标识符分类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">4.</span> <span class="nav-text">合法标识符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%AF%E5%85%B3%E9%94%AE%E5%AD%97%E4%BD%86%E4%B8%8D%E6%98%AF%E4%BF%9D%E7%95%99%E5%AD%97"><span class="nav-number">4.1.</span> <span class="nav-text">是关键字但不是保留字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F%E4%BF%9D%E7%95%99%E5%AD%97"><span class="nav-number">4.2.</span> <span class="nav-text">严格模式保留字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yield"><span class="nav-number">4.3.</span> <span class="nav-text">yield</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#await"><span class="nav-number">4.4.</span> <span class="nav-text">await </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yield-await-%E5%AD%98%E7%96%91%E9%97%AE%E9%A2%98"><span class="nav-number">4.5.</span> <span class="nav-text">yield&#x2F;await 存疑问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#eval-arguments"><span class="nav-number">4.6.</span> <span class="nav-text">eval&#x2F;arguments</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.7.</span> <span class="nav-text">undefined</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#let"><span class="nav-number">4.8.</span> <span class="nav-text">let</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PrivateIdentifier"><span class="nav-number">4.9.</span> <span class="nav-text">PrivateIdentifier</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97-1"><span class="nav-number">4.10.</span> <span class="nav-text">转义序列</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Babel"><span class="nav-number">5.</span> <span class="nav-text">Babel</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%9D%E7%95%99%E5%AD%97%E5%88%A4%E6%96%AD"><span class="nav-number">5.1.</span> <span class="nav-text">保留字判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6%E5%88%A4%E6%96%AD"><span class="nav-number">5.2.</span> <span class="nav-text">合法标识符判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2%E5%90%88%E6%B3%95%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">5.3.</span> <span class="nav-text">转换合法标识符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0"><span class="nav-number">6.</span> <span class="nav-text">练习</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="penghui"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">penghui</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/marked42" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;marked42" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:penghui.zhang@foxmail.com" title="E-Mail → mailto:penghui.zhang@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">penghui</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">38k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">35 分钟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

    </div>
</body>
</html>
